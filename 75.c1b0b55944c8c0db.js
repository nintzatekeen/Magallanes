"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[75],{2726:(fe,B,v)=>{v.d(B,{Uw:()=>I,fo:()=>D});var m=v(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var S=function(l){return l.Unimplemented="UNIMPLEMENTED",l.Unavailable="UNAVAILABLE",l}(S||{});class L extends Error{constructor(o,i,s){super(o),this.message=o,this.code=i,this.data=s}}const N=l=>{var o,i,s,a,t;const n=l.CapacitorCustomPlatform||null,r=l.Capacitor||{},c=r.Plugins=r.Plugins||{},u=l.CapacitorPlatforms,f=(null===(o=null==u?void 0:u.currentPlatform)||void 0===o?void 0:o.getPlatform)||(()=>null!==n?n.name:(l=>{var o,i;return null!=l&&l.androidBridge?"android":null!==(i=null===(o=null==l?void 0:l.webkit)||void 0===o?void 0:o.messageHandlers)&&void 0!==i&&i.bridge?"ios":"web"})(l)),C=(null===(i=null==u?void 0:u.currentPlatform)||void 0===i?void 0:i.isNativePlatform)||(()=>"web"!==f()),x=(null===(s=null==u?void 0:u.currentPlatform)||void 0===s?void 0:s.isPluginAvailable)||(p=>{const h=ee.get(p);return!!(null!=h&&h.platforms.has(f())||ue(p))}),ue=(null===(a=null==u?void 0:u.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||(p=>{var h;return null===(h=r.PluginHeaders)||void 0===h?void 0:h.find(q=>q.name===p)}),ee=new Map,_e=(null===(t=null==u?void 0:u.currentPlatform)||void 0===t?void 0:t.registerPlugin)||((p,h={})=>{const q=ee.get(p);if(q)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),q.proxy;const j=f(),H=ue(p);let Z;const ve=function(){var _=(0,m.Z)(function*(){return!Z&&j in h?Z=Z="function"==typeof h[j]?yield h[j]():h[j]:null!==n&&!Z&&"web"in h&&(Z=Z="function"==typeof h.web?yield h.web():h.web),Z});return function(){return _.apply(this,arguments)}}(),te=_=>{let b;const A=(...T)=>{const M=ve().then(O=>{const U=((_,b)=>{var A,T;if(!H){if(_)return null===(T=_[b])||void 0===T?void 0:T.bind(_);throw new L(`"${p}" plugin is not implemented on ${j}`,S.Unimplemented)}{const M=null==H?void 0:H.methods.find(O=>b===O.name);if(M)return"promise"===M.rtype?O=>r.nativePromise(p,b.toString(),O):(O,U)=>r.nativeCallback(p,b.toString(),O,U);if(_)return null===(A=_[b])||void 0===A?void 0:A.bind(_)}})(O,_);if(U){const R=U(...T);return b=null==R?void 0:R.remove,R}throw new L(`"${p}.${_}()" is not implemented on ${j}`,S.Unimplemented)});return"addListener"===_&&(M.remove=(0,m.Z)(function*(){return b()})),M};return A.toString=()=>`${_.toString()}() { [capacitor code] }`,Object.defineProperty(A,"name",{value:_,writable:!1,configurable:!1}),A},de=te("addListener"),me=te("removeListener"),Pe=(_,b)=>{const A=de({eventName:_},b),T=function(){var O=(0,m.Z)(function*(){const U=yield A;me({eventName:_,callbackId:U},b)});return function(){return O.apply(this,arguments)}}(),M=new Promise(O=>A.then(()=>O({remove:T})));return M.remove=(0,m.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield T()}),M},ne=new Proxy({},{get(_,b){switch(b){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return H?Pe:de;case"removeListener":return me;default:return te(b)}}});return c[p]=ne,ee.set(p,{name:p,proxy:ne,platforms:new Set([...Object.keys(h),...H?[j]:[]])}),ne});return r.convertFileSrc||(r.convertFileSrc=p=>p),r.getPlatform=f,r.handleError=p=>l.console.error(p),r.isNativePlatform=C,r.isPluginAvailable=x,r.pluginMethodNoop=(p,h,q)=>Promise.reject(`${q} does not have an implementation of "${h}".`),r.registerPlugin=_e,r.Exception=L,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r.platform=r.getPlatform(),r.isNative=r.isNativePlatform(),r},k=(l=>l.Capacitor=N(l))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),D=k.registerPlugin;class I{constructor(o){this.listeners={},this.windowListeners={},o&&(console.warn(`Capacitor WebPlugin "${o.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=o)}addListener(o,i){var s=this;this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(i);const t=this.windowListeners[o];t&&!t.registered&&this.addWindowListener(t);const n=function(){var c=(0,m.Z)(function*(){return s.removeListener(o,i)});return function(){return c.apply(this,arguments)}}(),r=Promise.resolve({remove:n});return Object.defineProperty(r,"remove",{value:(c=(0,m.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield n()}),function(){return c.apply(this,arguments)})}),r;var c}removeAllListeners(){var o=this;return(0,m.Z)(function*(){o.listeners={};for(const i in o.windowListeners)o.removeWindowListener(o.windowListeners[i]);o.windowListeners={}})()}notifyListeners(o,i){const s=this.listeners[o];s&&s.forEach(a=>a(i))}hasListeners(o){return!!this.listeners[o].length}registerWindowListener(o,i){this.windowListeners[i]={registered:!1,windowEventName:o,pluginEventName:i,handler:s=>{this.notifyListeners(i,s)}}}unimplemented(o="not implemented"){return new k.Exception(o,S.Unimplemented)}unavailable(o="not available"){return new k.Exception(o,S.Unavailable)}removeListener(o,i){var s=this;return(0,m.Z)(function*(){const a=s.listeners[o];if(!a)return;const t=a.indexOf(i);s.listeners[o].splice(t,1),s.listeners[o].length||s.removeWindowListener(s.windowListeners[o])})()}addWindowListener(o){window.addEventListener(o.windowEventName,o.handler),o.registered=!0}removeWindowListener(o){o&&(window.removeEventListener(o.windowEventName,o.handler),o.registered=!1)}}const G=l=>encodeURIComponent(l).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),z=l=>l.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Q extends I{getCookies(){return(0,m.Z)(function*(){const o=document.cookie,i={};return o.split(";").forEach(s=>{if(s.length<=0)return;let[a,t]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=z(a).trim(),t=z(t).trim(),i[a]=t}),i})()}setCookie(o){return(0,m.Z)(function*(){try{const i=G(o.key),s=G(o.value),a=`; expires=${(o.expires||"").replace("expires=","")}`,t=(o.path||"/").replace("path=",""),n=null!=o.url&&o.url.length>0?`domain=${o.url}`:"";document.cookie=`${i}=${s||""}${a}; path=${t}; ${n};`}catch(i){return Promise.reject(i)}})()}deleteCookie(o){return(0,m.Z)(function*(){try{document.cookie=`${o.key}=; Max-Age=0`}catch(i){return Promise.reject(i)}})()}clearCookies(){return(0,m.Z)(function*(){try{const o=document.cookie.split(";")||[];for(const i of o)document.cookie=i.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(o){return Promise.reject(o)}})()}clearAllCookies(){var o=this;return(0,m.Z)(function*(){try{yield o.clearCookies()}catch(i){return Promise.reject(i)}})()}}D("CapacitorCookies",{web:()=>new Q});const W=function(){var l=(0,m.Z)(function*(o){return new Promise((i,s)=>{const a=new FileReader;a.onload=()=>{const t=a.result;i(t.indexOf(",")>=0?t.split(",")[1]:t)},a.onerror=t=>s(t),a.readAsDataURL(o)})});return function(i){return l.apply(this,arguments)}}();class X extends I{request(o){return(0,m.Z)(function*(){const i=((l,o={})=>{const i=Object.assign({method:l.method||"GET",headers:l.headers},o),a=((l={})=>{const o=Object.keys(l);return Object.keys(l).map(a=>a.toLocaleLowerCase()).reduce((a,t,n)=>(a[t]=l[o[n]],a),{})})(l.headers)["content-type"]||"";if("string"==typeof l.data)i.body=l.data;else if(a.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(l.data||{}))t.set(n,r);i.body=t.toString()}else if(a.includes("multipart/form-data")||l.data instanceof FormData){const t=new FormData;if(l.data instanceof FormData)l.data.forEach((r,c)=>{t.append(c,r)});else for(const r of Object.keys(l.data))t.append(r,l.data[r]);i.body=t;const n=new Headers(i.headers);n.delete("content-type"),i.headers=n}else(a.includes("application/json")||"object"==typeof l.data)&&(i.body=JSON.stringify(l.data));return i})(o,o.webFetchExtra),s=((l,o=!0)=>l?Object.entries(l).reduce((s,a)=>{const[t,n]=a;let r,c;return Array.isArray(n)?(c="",n.forEach(u=>{r=o?encodeURIComponent(u):u,c+=`${t}=${r}&`}),c.slice(0,-1)):(r=o?encodeURIComponent(n):n,c=`${t}=${r}`),`${s}&${c}`},"").substr(1):null)(o.params,o.shouldEncodeUrlParams),a=s?`${o.url}?${s}`:o.url,t=yield fetch(a,i),n=t.headers.get("content-type")||"";let c,u,{responseType:r="text"}=t.ok?o:{};switch(n.includes("application/json")&&(r="json"),r){case"arraybuffer":case"blob":u=yield t.blob(),c=yield W(u);break;case"json":c=yield t.json();break;default:c=yield t.text()}const g={};return t.headers.forEach((f,y)=>{g[y]=f}),{data:c,headers:g,status:t.status,url:t.url}})()}get(o){var i=this;return(0,m.Z)(function*(){return i.request(Object.assign(Object.assign({},o),{method:"GET"}))})()}post(o){var i=this;return(0,m.Z)(function*(){return i.request(Object.assign(Object.assign({},o),{method:"POST"}))})()}put(o){var i=this;return(0,m.Z)(function*(){return i.request(Object.assign(Object.assign({},o),{method:"PUT"}))})()}patch(o){var i=this;return(0,m.Z)(function*(){return i.request(Object.assign(Object.assign({},o),{method:"PATCH"}))})()}delete(o){var i=this;return(0,m.Z)(function*(){return i.request(Object.assign(Object.assign({},o),{method:"DELETE"}))})()}}D("CapacitorHttp",{web:()=>new X})},75:(fe,B,v)=>{v.r(B),v.d(B,{HomePage:()=>o});var m=v(5861),e=v(9212),d=v(7897),w=v(6814);function E(i){function s(a){if(Object(a)!==a)return Promise.reject(new TypeError(a+" is not an object."));var t=a.done;return Promise.resolve(a.value).then(function(n){return{value:n,done:t}})}return(E=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return s(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):s(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):s(n.apply(this.s,arguments))}},new E(i)}class ${static comparador(s,a){let t=s.from,n=a.from;return t||n?n?t?t<n?-1:t>n?1:0:1:-1:0}static validarRelacion(s){return s&&s.mal_id&&s.mal_id>0}}class S{static getBaseDeDatos(){return(0,m.Z)(function*(){return new Promise((s,a)=>{try{let t=indexedDB.open("magallanes",2);t.onsuccess=()=>{console.log(t.result),s(t.result)},t.onerror=n=>{a(n)},t.onupgradeneeded=()=>{let n=t.result;n.objectStoreNames.contains("animes")?s(n):n.createObjectStore("animes",{keyPath:"id"})}}catch(t){a(t)}})})()}}var L=v(9862);let J=(()=>{var i;class s{constructor(t){this.http=t,this.obtenidos=new Map}buscarAnime(t){return this.http.get("https://api.jikan.moe/v4/anime",{params:t})}obtenerAnimeCompleto(t){return this.http.get(`https://api.jikan.moe/v4/anime/${t}/full`)}mapearAnime(t){var n,r,c,u,g,f;return{id:t.mal_id,title:t.title,image:null===(n=t.images)||void 0===n||null===(n=n.jpg)||void 0===n?void 0:n.image_url,type:t.type,episodes:t.episodes,status:t.status,airing:t.airing,score:t.score,from:null!==(r=t.aired)&&void 0!==r&&r.from?new Date(null===(c=t.aired)||void 0===c?void 0:c.from):null,to:null!==(u=t.aired)&&void 0!==u&&u.to?new Date(null===(g=t.aired)||void 0===g?void 0:g.to):null,relations:null!==(f=t.relations)&&void 0!==f?f:[],url:t.url}}anadirRelaciones(t,n){let r=[];if(t){let c=["Adaptation"];c.push(...n),t.filter(u=>!c.includes(u.relation)).forEach(u=>{for(let f of null!==(g=null==u?void 0:u.entry)&&void 0!==g?g:[]){var g;$.validarRelacion(f)&&"anime"===f.type&&!this.obtenidos.has(f.mal_id)&&(this.obtenidos.set(f.mal_id,f),r.push(f))}})}return r}consulta(t){var n=this;return(0,m.Z)(function*(){return new Promise((r,c)=>{n.baseDeDatos&&t?(console.log(t),n.baseDeDatos.transaction("animes").objectStore("animes").get(t).onsuccess=u=>{var g;let f=null==u||null===(g=u.target)||void 0===g?void 0:g.result;r(f)}):c(null)})})()}guardar(t){var n=this;return(0,m.Z)(function*(){return new Promise((r,c)=>{n.baseDeDatos&&(n.baseDeDatos.transaction(["animes"],"readwrite").objectStore("animes").put(t),r()),c()})})()}sagase(t,n,r){var c=this;return(0,m.Z)(function*(){let u=t.mal_id;c.baseDeDatos||(c.baseDeDatos=yield S.getBaseDeDatos());let g=yield c.consulta(u);return new Promise(g&&g?function(){var f=(0,m.Z)(function*(y,C){try{yield c.manejarAnime(g,n,r),y()}catch(P){C(P)}});return function(y,C){return f.apply(this,arguments)}}():(f,y)=>setTimeout((0,m.Z)(function*(){try{c.obtenerAnimeCompleto(u).subscribe(function(){var C=(0,m.Z)(function*(P){let x=c.mapearAnime(null==P?void 0:P.data);x&&(c.guardar(x),yield c.manejarAnime(x,n,r),f())});return function(P){return C.apply(this,arguments)}}())}catch(C){y(C)}}),1e3))})()}manejarAnime(t,n,r){var c=this;return(0,m.Z)(function*(){r.push(t),r.sort($.comparador);let g=c.anadirRelaciones(t.relations,n);var C,f=!1,y=!1;try{for(var x,P=function ie(i){var s,a,t,n=2;for(typeof Symbol<"u"&&(a=Symbol.asyncIterator,t=Symbol.iterator);n--;){if(a&&null!=(s=i[a]))return s.call(i);if(t&&null!=(s=i[t]))return new E(s.call(i));a="@@asyncIterator",t="@@iterator"}throw new TypeError("Object is not async iterable")}(g);f=!(x=yield P.next()).done;f=!1){let F=x.value;yield c.sagase(F,n,r)}}catch(F){y=!0,C=F}finally{try{f&&null!=P.return&&(yield P.return())}finally{if(y)throw C}}})()}}return(i=s).\u0275fac=function(t){return new(t||i)(e.LFG(L.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),s})();const N=["barraBusqueda"],oe=["botonFiltro"];function k(i,s){if(1&i){const a=e.EpF();e.TgZ(0,"ion-item",14),e.NdJ("click",function(){const r=e.CHM(a).$implicit,c=e.oxw(2);return e.KtG(c.seleccionarAnime(r))}),e.TgZ(1,"ion-avatar",15),e._UZ(2,"img",16),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()()}if(2&i){const a=s.$implicit;e.Q6J("button",!0),e.xp6(2),e.Q6J("src",a.image,e.LSH),e.xp6(2),e.Oqu(a.title)}}function D(i,s){if(1&i){const a=e.EpF();e.TgZ(0,"ion-row",0)(1,"ion-col",9)(2,"div",10)(3,"ion-content",11)(4,"ion-list",0),e.YNc(5,k,5,3,"ion-item",12),e.qZA(),e.TgZ(6,"ion-infinite-scroll",13),e.NdJ("ionInfinite",function(n){e.CHM(a);const r=e.oxw();return e.KtG(r.onIonInfinite(n))}),e._UZ(7,"ion-infinite-scroll-content"),e.qZA()()()()()}if(2&i){const a=e.oxw();e.xp6(5),e.Q6J("ngForOf",a.items)}}let re=(()=>{var i;class s{constructor(t){this.animeService=t,this.alSeleccionar=new e.vpe,this.alAbrirFiltro=new e.vpe,this.items=[],this.pagina=1,this.busqueda="",this.timeoutInput=null,this.seleccionado=null}ngOnInit(){}generateItems(){this.animeService.buscarAnime({q:this.busqueda,limit:25,page:this.pagina++}).subscribe(t=>{t.data.forEach(n=>{let r=this.animeService.mapearAnime(n);this.items.push(r)})})}onIonInfinite(t){this.generateItems(),setTimeout(()=>{t.target.complete()},1e3)}buscar(t){var n;this.pagina=1,this.busqueda=null==t||null===(n=t.detail)||void 0===n?void 0:n.value,this.timeoutInput&&clearTimeout(this.timeoutInput),this.timeoutInput=setTimeout(()=>{this.items=[],this.busqueda&&this.generateItems()},333)}seleccionarAnime(t){this.limpiar();let n=t.id;n&&this.animeService.obtenerAnimeCompleto(n).subscribe(r=>{let c=null==r?void 0:r.data;c&&(this.seleccionado=this.animeService.mapearAnime(c),this.alSeleccionar.emit(this.seleccionado))})}mostrarFiltro(){this.alAbrirFiltro.emit()}limpiar(){this.barraBusqueda.value="",this.busqueda="",this.items=[],this.pagina=1,this.timeoutInput=null}}return(i=s).\u0275fac=function(t){return new(t||i)(e.Y36(J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-buscador"]],viewQuery:function(t,n){if(1&t&&(e.Gf(N,5),e.Gf(oe,7)),2&t){let r;e.iGM(r=e.CRH())&&(n.barraBusqueda=r.first),e.iGM(r=e.CRH())&&(n.botonFiltro=r.first)}},outputs:{alSeleccionar:"alSeleccionar",alAbrirFiltro:"alAbrirFiltro"},standalone:!0,features:[e.jDz],decls:10,vars:1,consts:[[1,"ion-no-padding","ion-no-margin"],["size","10"],["placeholder","Buscar anime",3,"ionInput"],["barraBusqueda",""],["size","2"],["fill","clear","shape","circle",3,"click"],["botonFiltro",""],["slot","icon-only","src","../../assets/icon/filter.svg"],["class","ion-no-padding ion-no-margin",4,"ngIf"],["size","12"],[1,"contenedorscroll"],[1,"contenidoscroll",2,"height","100%"],[3,"button","click",4,"ngFor","ngForOf"],[3,"ionInfinite"],[3,"button","click"],["slot","start"],["alt","avatar",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-grid",0)(1,"ion-row",0)(2,"ion-col",1)(3,"ion-searchbar",2,3),e.NdJ("ionInput",function(c){return n.buscar(c)}),e.qZA()(),e.TgZ(5,"ion-col",4)(6,"ion-button",5,6),e.NdJ("click",function(){return n.mostrarFiltro()}),e._UZ(8,"ion-icon",7),e.qZA()()(),e.YNc(9,D,8,1,"ion-row",8),e.qZA()),2&t&&(e.xp6(9),e.Q6J("ngIf",n.busqueda))},dependencies:[d.VI,d.W2,d.ju,d.q_,d.BJ,d.Q$,d.Ie,d.MB,d.YG,d.gu,d.jY,d.Nd,d.wI,w.ez,w.sg,w.O5],styles:[".contenedorscroll[_ngcontent-%COMP%]{min-height:250px;max-height:500px;height:60vh;width:100%;z-index:997;position:absolute}.contenidoscroll[_ngcontent-%COMP%]{height:100%}ion-button[shape=circle][_ngcontent-%COMP%]{--border-radius: 50%;width:56px;height:56px}"]}),s})(),ae=(()=>{var i;class s{constructor(){this.alClicar=new e.vpe,this.openCapacitorSite=t=>{t&&this.alClicar.emit(t)}}ngOnInit(){}}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-anime"]],inputs:{anime:"anime",indice:"indice"},outputs:{alClicar:"alClicar"},standalone:!0,features:[e.jDz],decls:51,vars:16,consts:[[1,"itemPadre",3,"button","click"],[1,"contenedorIndice","negrita","col-centrada"],[1,"ion-no-padding"],[2,"min-height","100px"],["size-xs","3","size-xl","1",1,"colImagen"],["alt","avatar",1,"imganime",3,"src"],["size-xs","9","size-xl","11"],["size","12"],[1,"contenedorTitulo"],["size","3"],[1,"contenedorDatos","ion-text-end"],[1,"contenedorDatos","negrita"],["size","6"],[1,"contenedorDatos"],[1,"negrita"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-item",0),e.NdJ("click",function(){return n.openCapacitorSite(null==n.anime?null:n.anime.url)}),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"ion-grid",2)(4,"ion-row",3)(5,"ion-col",4),e._UZ(6,"img",5),e.qZA(),e.TgZ(7,"ion-col",6)(8,"ion-grid",2)(9,"ion-row")(10,"ion-col",7)(11,"div",8),e._uU(12),e.qZA()()(),e.TgZ(13,"ion-row")(14,"ion-col",9)(15,"div",10),e._uU(16,"Tipo: "),e.qZA()(),e.TgZ(17,"ion-col",9)(18,"div",11),e._uU(19),e.qZA()(),e.TgZ(20,"ion-col",12)(21,"div",13),e._uU(22,"F.inicio: "),e.TgZ(23,"span",14),e._uU(24),e.ALo(25,"date"),e.qZA()()()(),e.TgZ(26,"ion-row")(27,"ion-col",9)(28,"div",10),e._uU(29,"Ep.: "),e.qZA()(),e.TgZ(30,"ion-col",9)(31,"div",11),e._uU(32),e.qZA()(),e.TgZ(33,"ion-col",12)(34,"div",13),e._uU(35,"F.fin: "),e.TgZ(36,"span",14),e._uU(37),e.ALo(38,"date"),e.qZA()()()(),e.TgZ(39,"ion-row")(40,"ion-col",9)(41,"div",10),e._uU(42,"Nota: "),e.qZA()(),e.TgZ(43,"ion-col",9)(44,"div",11),e._uU(45),e.qZA()(),e.TgZ(46,"ion-col",12)(47,"div",13),e._uU(48,"Estado: "),e.TgZ(49,"span",14),e._uU(50),e.qZA()()()()()()()()()),2&t&&(e.Q6J("button",!0),e.xp6(2),e.Oqu(n.indice),e.xp6(4),e.Q6J("src",null==n.anime?null:n.anime.image,e.LSH),e.xp6(6),e.Oqu(null==n.anime?null:n.anime.title),e.xp6(7),e.Oqu(null==n.anime?null:n.anime.type),e.xp6(5),e.Oqu(e.xi3(25,10,null==n.anime?null:n.anime.from,"dd/MM/yyyy")),e.xp6(8),e.Oqu(null==n.anime?null:n.anime.episodes),e.xp6(5),e.Oqu(e.xi3(38,13,null==n.anime?null:n.anime.to,"dd/MM/yyyy")),e.xp6(8),e.Oqu(null==n.anime?null:n.anime.score),e.xp6(5),e.Oqu(null==n.anime?null:n.anime.status))},dependencies:[d.Ie,d.jY,d.Nd,d.wI,w.uU],styles:["ion-avatar[_ngcontent-%COMP%]{--border-radius: 4px}.col-centrada[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center}ion-badge[_ngcontent-%COMP%]{font-size:1.5em}ion-avatar[_ngcontent-%COMP%]{height:100%;width:100%}.imganime[_ngcontent-%COMP%]{height:100%;object-fit:cover}.contenedorTitulo[_ngcontent-%COMP%]{text-align:center;font-weight:700;margin-top:.5em;margin-bottom:.5em}.contenedorIndice[_ngcontent-%COMP%]{width:7.5%}.negrita[_ngcontent-%COMP%]{font-weight:700}.contenedorDatos[_ngcontent-%COMP%]{margin-left:5px;margin-bottom:5px}@media screen and (max-width: 450px){.colImagen[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}img[_ngcontent-%COMP%]{height:55%!important}}.itemPadre[_ngcontent-%COMP%]{--padding-start: 0}"]}),s})();var I=v(95);const G=(0,v(2726).fo)("Browser",{web:()=>v.e(671).then(v.bind(v,3671)).then(i=>new i.BrowserWeb)}),z=["tarjetaOpciones"],Q=["checkResumenes"],le=["checkOtros"],W=["checkCharacter"],K=["toastAviso"];function V(i,s){if(1&i){const a=e.EpF();e.TgZ(0,"ion-card",10,11)(2,"ion-card-header")(3,"ion-card-title"),e._uU(4,"Filtro"),e.qZA(),e.TgZ(5,"ion-card-subtitle"),e._uU(6,"OMITIR:"),e.qZA()(),e.TgZ(7,"ion-card-content")(8,"ion-grid")(9,"ion-row")(10,"ion-col",12)(11,"ion-checkbox",13,14),e.NdJ("ngModelChange",function(n){e.CHM(a);const r=e.oxw();return e.KtG(r.summary=n)}),e._uU(13,"Res\xfamenes"),e.qZA()()(),e.TgZ(14,"ion-row")(15,"ion-col",12)(16,"ion-checkbox",13,15),e.NdJ("ngModelChange",function(n){e.CHM(a);const r=e.oxw();return e.KtG(r.other=n)}),e._uU(18,"Otros"),e.qZA()()(),e.TgZ(19,"ion-row")(20,"ion-col",12)(21,"ion-checkbox",13,16),e.NdJ("ngModelChange",function(n){e.CHM(a);const r=e.oxw();return e.KtG(r.character=n)}),e._uU(23,"Character"),e.qZA()()()()()()}if(2&i){const a=e.oxw();e.xp6(11),e.Q6J("ngModel",a.summary),e.xp6(5),e.Q6J("ngModel",a.other),e.xp6(5),e.Q6J("ngModel",a.character)}}function Y(i,s){1&i&&(e.TgZ(0,"ion-row")(1,"ion-col",17),e._UZ(2,"ion-progress-bar",18),e.qZA()())}function X(i,s){if(1&i){const a=e.EpF();e.TgZ(0,"app-anime",23),e.NdJ("alClicar",function(n){e.CHM(a);const r=e.oxw(2);return e.KtG(r.abrirNavegador(n))}),e.qZA()}if(2&i){const a=s.$implicit;e.Q6J("indice",s.index+1)("anime",a)}}function ce(i,s){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col",19)(2,"ion-content",20)(3,"ion-list",21),e.YNc(4,X,1,2,"app-anime",22),e.qZA()()()()),2&i){const a=e.oxw();e.xp6(2),e.Q6J("scrollEvents",!0),e.xp6(2),e.Q6J("ngForOf",a.animes)}}const l=i=>({fondoOpciones:i});let o=(()=>{var i;class s{setOpen(t){this.isToastOpen=t}setAlertOpen(t){this.isAlertOpen=t}get filtros(){let t=[];return this.summary&&t.push("Summary"),this.other&&t.push("Other"),this.character&&t.push("Character"),t}constructor(t){var r,n=this;this.animeService=t,this.animes=[],this.filtroVisible=!1,this.barraProgreso=!1,this.isToastOpen=!1,this.isAlertOpen=!1,this.alertButtons=[{text:"No",role:"cancel",handler:()=>{console.log("Alert canceled")}},{text:"S\xed",role:"confirm",handler:(r=(0,m.Z)(function*(){yield G.open({url:n.urlParaAbrir}),n.urlParaAbrir=void 0}),function(){return r.apply(this,arguments)})}],this.summary=!1,this.other=!1,this.character=!1}ver(t){let n={mal_id:t.id,url:t.url,type:"",name:""};this.animes=[],this.animeService.obtenidos.clear(),this.animeService.obtenidos.set(n.mal_id,n),this.barraProgreso=!0,this.animeService.sagase(n,this.filtros,this.animes).then(()=>{this.barraProgreso=!1,this.isToastOpen=!0,this.toastAviso.message="Se han encontrado "+this.animes.length+" resultados"})}mostrarFiltro(){this.filtroVisible=!this.filtroVisible}abrirNavegador(t){var n=this;return(0,m.Z)(function*(){n.urlParaAbrir=t,n.isAlertOpen=!0})()}onGlobalClick(t){this.filtroVisible&&(this.tarjetaOpciones.nativeElement.contains(t.target)||(this.filtroVisible=!1))}}return(i=s).\u0275fac=function(t){return new(t||i)(e.Y36(J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-home"]],viewQuery:function(t,n){if(1&t&&(e.Gf(z,5,e.SBq),e.Gf(Q,5),e.Gf(le,5),e.Gf(W,5),e.Gf(K,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.tarjetaOpciones=r.first),e.iGM(r=e.CRH())&&(n.checkResumenes=r.first),e.iGM(r=e.CRH())&&(n.checkOtros=r.first),e.iGM(r=e.CRH())&&(n.checkCharacter=r.first),e.iGM(r=e.CRH())&&(n.toastAviso=r.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mousedown",function(c){return n.onGlobalClick(c)},!1,e.evT)},standalone:!0,features:[e.jDz],decls:11,vars:10,consts:[[1,"ion-no-margin"],[1,"barraSuperior"],["size-xs","12","size-sm","10"],[3,"alSeleccionar","alAbrirFiltro"],[3,"ngClass"],["class","cardOpciones ion-no-margin",4,"ngIf"],[4,"ngIf"],[3,"isOpen","duration","didDismiss"],["toastAviso",""],["header","Abrir enlace","message","Se va a abrir un enlace externo; \xbfdesea continuar?",3,"isOpen","buttons","didDismiss"],[1,"cardOpciones","ion-no-margin"],["tarjetaOpciones",""],["size","6","offset","1"],["labelPlacement","end",3,"ngModel","ngModelChange"],["checkResumenes",""],["checkOtros",""],["checkCharacter",""],["size","12"],["type","indeterminate"],["size-xs","12","size-sm","8","offset-sm","2"],[1,"contentScroll",3,"scrollEvents"],[1,"ion-no-padding"],[3,"indice","anime","alClicar",4,"ngFor","ngForOf"],[3,"indice","anime","alClicar"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-grid",0)(1,"ion-row",1)(2,"ion-col",2)(3,"app-buscador",3),e.NdJ("alSeleccionar",function(c){return n.ver(c)})("alAbrirFiltro",function(){return n.mostrarFiltro()}),e.qZA(),e._UZ(4,"div",4),e.YNc(5,V,24,3,"ion-card",5),e.qZA()(),e.YNc(6,Y,3,0,"ion-row",6)(7,ce,5,2,"ion-row",6),e.qZA(),e.TgZ(8,"ion-toast",7,8),e.NdJ("didDismiss",function(){return n.setOpen(!1)}),e.qZA(),e.TgZ(10,"ion-alert",9),e.NdJ("didDismiss",function(){return n.setAlertOpen(!1)}),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngClass",e.VKq(8,l,n.filtroVisible)),e.xp6(),e.Q6J("ngIf",n.filtroVisible),e.xp6(),e.Q6J("ngIf",n.barraProgreso),e.xp6(),e.Q6J("ngIf",null!=n.animes&&n.animes.length>0),e.xp6(),e.Q6J("isOpen",n.isToastOpen)("duration",5e3),e.xp6(2),e.Q6J("isOpen",n.isAlertOpen)("buttons",n.alertButtons))},dependencies:[d.Ge,d.Px,d.X7,d.W2,re,ae,d.jY,d.Nd,d.wI,d.q_,d.PM,d.FN,d.Zi,d.Dq,d.tO,d.nz,w.ez,w.mk,w.sg,w.O5,I.u5,I.JJ,I.On],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.cardOpciones[_ngcontent-%COMP%]{z-index:999;position:absolute;right:0;width:300px}@media screen and (max-width: 600px){.cardOpciones[_ngcontent-%COMP%]{position:fixed;width:80vw;height:210px;top:calc((100% - 210px)/2);left:10vw;right:10vw}.fondoOpciones[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:998;background:#d3d3d3;opacity:.5}}.barraSuperior[_ngcontent-%COMP%]{height:75px}.contentScroll[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 90px)}"]}),s})()}}]);