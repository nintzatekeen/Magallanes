"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[591],{2726:(_e,R,x)=>{x.d(R,{Uw:()=>G,fo:()=>V});var _=x(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var B=function(l){return l.Unimplemented="UNIMPLEMENTED",l.Unavailable="UNAVAILABLE",l}(B||{});class J extends Error{constructor(i,r,d){super(i),this.message=i,this.code=r,this.data=d}}const W=l=>{var i,r,d,p,u;const P=l.CapacitorCustomPlatform||null,m=l.Capacitor||{},C=m.Plugins=m.Plugins||{},w=l.CapacitorPlatforms,c=(null===(i=null==w?void 0:w.currentPlatform)||void 0===i?void 0:i.getPlatform)||(()=>null!==P?P.name:(l=>{var i,r;return null!=l&&l.androidBridge?"android":null!==(r=null===(i=null==l?void 0:l.webkit)||void 0===i?void 0:i.messageHandlers)&&void 0!==r&&r.bridge?"ios":"web"})(l)),t=(null===(r=null==w?void 0:w.currentPlatform)||void 0===r?void 0:r.isNativePlatform)||(()=>"web"!==c()),s=(null===(d=null==w?void 0:w.currentPlatform)||void 0===d?void 0:d.isPluginAvailable)||(v=>{const b=k.get(v);return!!(null!=b&&b.platforms.has(c())||h(v))}),h=(null===(p=null==w?void 0:w.currentPlatform)||void 0===p?void 0:p.getPluginHeader)||(v=>{var b;return null===(b=m.PluginHeaders)||void 0===b?void 0:b.find(q=>q.name===v)}),k=new Map,j=(null===(u=null==w?void 0:w.currentPlatform)||void 0===u?void 0:u.registerPlugin)||((v,b={})=>{const q=k.get(v);if(q)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),q.proxy;const D=c(),$=h(v);let I;const ve=function(){var T=(0,_.Z)(function*(){return!I&&D in b?I=I="function"==typeof b[D]?yield b[D]():b[D]:null!==P&&!I&&"web"in b&&(I=I="function"==typeof b.web?yield b.web():b.web),I});return function(){return T.apply(this,arguments)}}(),se=T=>{let Z;const H=(...U)=>{const F=ve().then(S=>{const L=((T,Z)=>{var H,U;if(!$){if(T)return null===(U=T[Z])||void 0===U?void 0:U.bind(T);throw new J(`"${v}" plugin is not implemented on ${D}`,B.Unimplemented)}{const F=null==$?void 0:$.methods.find(S=>Z===S.name);if(F)return"promise"===F.rtype?S=>m.nativePromise(v,Z.toString(),S):(S,L)=>m.nativeCallback(v,Z.toString(),S,L);if(T)return null===(H=T[Z])||void 0===H?void 0:H.bind(T)}})(S,T);if(L){const ee=L(...U);return Z=null==ee?void 0:ee.remove,ee}throw new J(`"${v}.${T}()" is not implemented on ${D}`,B.Unimplemented)});return"addListener"===T&&(F.remove=(0,_.Z)(function*(){return Z()})),F};return H.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(H,"name",{value:T,writable:!1,configurable:!1}),H},ge=se("addListener"),he=se("removeListener"),Pe=(T,Z)=>{const H=ge({eventName:T},Z),U=function(){var S=(0,_.Z)(function*(){const L=yield H;he({eventName:T,callbackId:L},Z)});return function(){return S.apply(this,arguments)}}(),F=new Promise(S=>H.then(()=>S({remove:U})));return F.remove=(0,_.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield U()}),F},le=new Proxy({},{get(T,Z){switch(Z){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return $?Pe:ge;case"removeListener":return he;default:return se(Z)}}});return C[v]=le,k.set(v,{name:v,proxy:le,platforms:new Set([...Object.keys(b),...$?[D]:[]])}),le});return m.convertFileSrc||(m.convertFileSrc=v=>v),m.getPlatform=c,m.handleError=v=>l.console.error(v),m.isNativePlatform=t,m.isPluginAvailable=s,m.pluginMethodNoop=(v,b,q)=>Promise.reject(`${q} does not have an implementation of "${b}".`),m.registerPlugin=j,m.Exception=J,m.DEBUG=!!m.DEBUG,m.isLoggingEnabled=!!m.isLoggingEnabled,m.platform=m.getPlatform(),m.isNative=m.isNativePlatform(),m},E=(l=>l.Capacitor=W(l))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),V=E.registerPlugin;class G{constructor(i){this.listeners={},this.windowListeners={},i&&(console.warn(`Capacitor WebPlugin "${i.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=i)}addListener(i,r){var d=this;this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(r);const u=this.windowListeners[i];u&&!u.registered&&this.addWindowListener(u);const P=function(){var C=(0,_.Z)(function*(){return d.removeListener(i,r)});return function(){return C.apply(this,arguments)}}(),m=Promise.resolve({remove:P});return Object.defineProperty(m,"remove",{value:(C=(0,_.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield P()}),function(){return C.apply(this,arguments)})}),m;var C}removeAllListeners(){var i=this;return(0,_.Z)(function*(){i.listeners={};for(const r in i.windowListeners)i.removeWindowListener(i.windowListeners[r]);i.windowListeners={}})()}notifyListeners(i,r){const d=this.listeners[i];d&&d.forEach(p=>p(r))}hasListeners(i){return!!this.listeners[i].length}registerWindowListener(i,r){this.windowListeners[r]={registered:!1,windowEventName:i,pluginEventName:r,handler:d=>{this.notifyListeners(r,d)}}}unimplemented(i="not implemented"){return new E.Exception(i,B.Unimplemented)}unavailable(i="not available"){return new E.Exception(i,B.Unavailable)}removeListener(i,r){var d=this;return(0,_.Z)(function*(){const p=d.listeners[i];if(!p)return;const u=p.indexOf(r);d.listeners[i].splice(u,1),d.listeners[i].length||d.removeWindowListener(d.windowListeners[i])})()}addWindowListener(i){window.addEventListener(i.windowEventName,i.handler),i.registered=!0}removeWindowListener(i){i&&(window.removeEventListener(i.windowEventName,i.handler),i.registered=!1)}}const K=l=>encodeURIComponent(l).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),X=l=>l.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class te extends G{getCookies(){return(0,_.Z)(function*(){const i=document.cookie,r={};return i.split(";").forEach(d=>{if(d.length<=0)return;let[p,u]=d.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");p=X(p).trim(),u=X(u).trim(),r[p]=u}),r})()}setCookie(i){return(0,_.Z)(function*(){try{const r=K(i.key),d=K(i.value),p=`; expires=${(i.expires||"").replace("expires=","")}`,u=(i.path||"/").replace("path=",""),P=null!=i.url&&i.url.length>0?`domain=${i.url}`:"";document.cookie=`${r}=${d||""}${p}; path=${u}; ${P};`}catch(r){return Promise.reject(r)}})()}deleteCookie(i){return(0,_.Z)(function*(){try{document.cookie=`${i.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}})()}clearCookies(){return(0,_.Z)(function*(){try{const i=document.cookie.split(";")||[];for(const r of i)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(i){return Promise.reject(i)}})()}clearAllCookies(){var i=this;return(0,_.Z)(function*(){try{yield i.clearCookies()}catch(r){return Promise.reject(r)}})()}}V("CapacitorCookies",{web:()=>new te});const ne=function(){var l=(0,_.Z)(function*(i){return new Promise((r,d)=>{const p=new FileReader;p.onload=()=>{const u=p.result;r(u.indexOf(",")>=0?u.split(",")[1]:u)},p.onerror=u=>d(u),p.readAsDataURL(i)})});return function(r){return l.apply(this,arguments)}}();class ae extends G{request(i){return(0,_.Z)(function*(){const r=((l,i={})=>{const r=Object.assign({method:l.method||"GET",headers:l.headers},i),p=((l={})=>{const i=Object.keys(l);return Object.keys(l).map(p=>p.toLocaleLowerCase()).reduce((p,u,P)=>(p[u]=l[i[P]],p),{})})(l.headers)["content-type"]||"";if("string"==typeof l.data)r.body=l.data;else if(p.includes("application/x-www-form-urlencoded")){const u=new URLSearchParams;for(const[P,m]of Object.entries(l.data||{}))u.set(P,m);r.body=u.toString()}else if(p.includes("multipart/form-data")||l.data instanceof FormData){const u=new FormData;if(l.data instanceof FormData)l.data.forEach((m,C)=>{u.append(C,m)});else for(const m of Object.keys(l.data))u.append(m,l.data[m]);r.body=u;const P=new Headers(r.headers);P.delete("content-type"),r.headers=P}else(p.includes("application/json")||"object"==typeof l.data)&&(r.body=JSON.stringify(l.data));return r})(i,i.webFetchExtra),d=((l,i=!0)=>l?Object.entries(l).reduce((d,p)=>{const[u,P]=p;let m,C;return Array.isArray(P)?(C="",P.forEach(w=>{m=i?encodeURIComponent(w):w,C+=`${u}=${m}&`}),C.slice(0,-1)):(m=i?encodeURIComponent(P):P,C=`${u}=${m}`),`${d}&${C}`},"").substr(1):null)(i.params,i.shouldEncodeUrlParams),p=d?`${i.url}?${d}`:i.url,u=yield fetch(p,r),P=u.headers.get("content-type")||"";let C,w,{responseType:m="text"}=u.ok?i:{};switch(P.includes("application/json")&&(m="json"),m){case"arraybuffer":case"blob":w=yield u.blob(),C=yield ne(w);break;case"json":C=yield u.json();break;default:C=yield u.text()}const a={};return u.headers.forEach((c,o)=>{a[o]=c}),{data:C,headers:a,status:u.status,url:u.url}})()}get(i){var r=this;return(0,_.Z)(function*(){return r.request(Object.assign(Object.assign({},i),{method:"GET"}))})()}post(i){var r=this;return(0,_.Z)(function*(){return r.request(Object.assign(Object.assign({},i),{method:"POST"}))})()}put(i){var r=this;return(0,_.Z)(function*(){return r.request(Object.assign(Object.assign({},i),{method:"PUT"}))})()}patch(i){var r=this;return(0,_.Z)(function*(){return r.request(Object.assign(Object.assign({},i),{method:"PATCH"}))})()}delete(i){var r=this;return(0,_.Z)(function*(){return r.request(Object.assign(Object.assign({},i),{method:"DELETE"}))})()}}V("CapacitorHttp",{web:()=>new ae})},1591:(_e,R,x)=>{x.r(R),x.d(R,{HomePage:()=>w});var _=x(5861),g=x(7897),e=x(9212),A=x(6814);function z(a){function c(o){if(Object(o)!==o)return Promise.reject(new TypeError(o+" is not an object."));var t=o.done;return Promise.resolve(o.value).then(function(n){return{value:n,done:t}})}return(z=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return c(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):c(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):c(n.apply(this.s,arguments))}},new z(a)}class N{static comparador(c,o){let t=c.from,n=o.from;return t||n?n?t?t<n?-1:t>n?1:0:1:-1:0}static validarRelacion(c){return c&&c.mal_id&&c.mal_id>0}}class B{static getBaseDeDatos(){return(0,_.Z)(function*(){return new Promise((c,o)=>{try{let t=indexedDB.open("magallanes",2);t.onsuccess=()=>{c(t.result)},t.onerror=n=>{o(n)},t.onupgradeneeded=()=>{let n=t.result;n.objectStoreNames.contains("animes")?c(n):n.createObjectStore("animes",{keyPath:"id"})}}catch(t){o(t)}})})()}}var J=x(9862);const Q="https://api.jikan.moe/v4";let W=(()=>{var a;class c{constructor(t){this.http=t,this.obtenidos=new Map}buscarAnime(t){return this.http.get(`${Q}/anime`,{params:t})}obtenerAnimeCompleto(t){return this.http.get(`${Q}/anime/${t}/full`)}mapearAnime(t){var n,s,f,h,O,y;return{id:t.mal_id,title:t.title,image:null===(n=t.images)||void 0===n||null===(n=n.jpg)||void 0===n?void 0:n.image_url,type:t.type,episodes:t.episodes,status:t.status,airing:t.airing,score:t.score,from:null!==(s=t.aired)&&void 0!==s&&s.from?new Date(null===(f=t.aired)||void 0===f?void 0:f.from):null,to:null!==(h=t.aired)&&void 0!==h&&h.to?new Date(null===(O=t.aired)||void 0===O?void 0:O.to):null,relations:null!==(y=t.relations)&&void 0!==y?y:[],url:t.url}}anadirRelaciones(t,n){let s=[];if(t){let f=["Adaptation"];f.push(...n),t.filter(h=>!f.includes(h.relation)).forEach(h=>{for(let y of null!==(O=null==h?void 0:h.entry)&&void 0!==O?O:[]){var O;N.validarRelacion(y)&&"anime"===y.type&&!this.obtenidos.has(y.mal_id)&&(this.obtenidos.set(y.mal_id,y),s.push(y))}})}return s}consulta(t){var n=this;return(0,_.Z)(function*(){return new Promise((s,f)=>{try{n.baseDeDatos&&t?n.baseDeDatos.transaction("animes").objectStore("animes").get(t).onsuccess=h=>{var O;let y=null==h||null===(O=h.target)||void 0===O?void 0:O.result;s(y)}:f()}catch(h){f(h)}})})()}guardar(t){var n=this;return(0,_.Z)(function*(){return new Promise((s,f)=>{try{n.baseDeDatos?(n.baseDeDatos.transaction(["animes"],"readwrite").objectStore("animes").put(t),s()):f()}catch{f()}})})()}sagase(t,n,s,f){var h=this;return(0,_.Z)(function*(){let O=t.mal_id;h.baseDeDatos||(h.baseDeDatos=yield B.getBaseDeDatos());let y=yield h.consulta(O);return new Promise(y?function(){var k=(0,_.Z)(function*(M,j){try{yield h.manejarAnime(y,n,s,f),M()}catch(v){j(v)}});return function(M,j){return k.apply(this,arguments)}}():(k,M)=>setTimeout((0,_.Z)(function*(){var j;h.obtenerAnimeCompleto(O).subscribe({next:(j=(0,_.Z)(function*(v){if(f&&f.cancelar)M("B\xfasqueda cancelada");else{let b=h.mapearAnime(null==v?void 0:v.data);if(b){b.to&&b.to<new Date&&h.guardar(b);try{yield h.manejarAnime(b,n,s,f),k()}catch(q){M(q)}}else M()}}),function(b){return j.apply(this,arguments)}),error:j=>{M(j)}})}),1e3))})()}manejarAnime(t,n,s,f){var h=this;return(0,_.Z)(function*(){s.push(t),s.sort(N.comparador);let y=h.anadirRelaciones(t.relations,n);var j,k=!1,M=!1;try{for(var b,v=function ce(a){var c,o,t,n=2;for(typeof Symbol<"u"&&(o=Symbol.asyncIterator,t=Symbol.iterator);n--;){if(o&&null!=(c=a[o]))return c.call(a);if(t&&null!=(c=a[t]))return new z(c.call(a));o="@@asyncIterator",t="@@iterator"}throw new TypeError("Object is not async iterable")}(y);k=!(b=yield v.next()).done;k=!1){let q=b.value;yield h.sagase(q,n,s,f)}}catch(q){M=!0,j=q}finally{try{k&&null!=v.return&&(yield v.return())}finally{if(M)throw j}}})()}}return(a=c).\u0275fac=function(t){return new(t||a)(e.LFG(J.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),c})();const ue=["barraBusqueda"],E=["botonFiltro"];function V(a,c){if(1&a){const o=e.EpF();e.TgZ(0,"ion-item",14),e.NdJ("click",function(){const s=e.CHM(o).$implicit,f=e.oxw(2);return e.KtG(f.seleccionarAnime(s))}),e.TgZ(1,"ion-avatar",15),e._UZ(2,"img",16),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()()}if(2&a){const o=c.$implicit;e.Q6J("button",!0),e.xp6(2),e.Q6J("src",o.image,e.LSH),e.xp6(2),e.Oqu(o.title)}}function de(a,c){if(1&a){const o=e.EpF();e.TgZ(0,"ion-row",0)(1,"ion-col",9)(2,"div",10)(3,"ion-content",11)(4,"ion-list",0),e.YNc(5,V,5,3,"ion-item",12),e.qZA(),e.TgZ(6,"ion-infinite-scroll",13),e.NdJ("ionInfinite",function(n){e.CHM(o);const s=e.oxw();return e.KtG(s.onIonInfinite(n))}),e._UZ(7,"ion-infinite-scroll-content"),e.qZA()()()()()}if(2&a){const o=e.oxw();e.xp6(5),e.Q6J("ngForOf",o.items)}}let me=(()=>{var a;class c{constructor(t){this.animeService=t,this.alSeleccionar=new e.vpe,this.alAbrirFiltro=new e.vpe,this.items=[],this.pagina=1,this.busqueda="",this.timeoutInput=null,this.seleccionado=null}ngOnInit(){}generateItems(){this.animeService.buscarAnime({q:this.busqueda,limit:25,page:this.pagina++}).subscribe(t=>{t.data.forEach(n=>{let s=this.animeService.mapearAnime(n);this.items.push(s)})})}onIonInfinite(t){this.generateItems(),setTimeout(()=>{t.target.complete()},1e3)}buscar(t){var n;this.pagina=1,this.busqueda=null==t||null===(n=t.detail)||void 0===n?void 0:n.value,this.timeoutInput&&clearTimeout(this.timeoutInput),this.timeoutInput=setTimeout(()=>{this.items=[],this.busqueda&&this.generateItems()},333)}seleccionarAnime(t){this.limpiar();let n=t.id;n&&this.animeService.obtenerAnimeCompleto(n).subscribe(s=>{let f=null==s?void 0:s.data;f&&(this.seleccionado=this.animeService.mapearAnime(f),this.alSeleccionar.emit(this.seleccionado))})}mostrarFiltro(){this.alAbrirFiltro.emit()}limpiar(){this.barraBusqueda.value="",this.busqueda="",this.items=[],this.pagina=1,this.timeoutInput=null}}return(a=c).\u0275fac=function(t){return new(t||a)(e.Y36(W))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-buscador"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ue,5),e.Gf(E,7)),2&t){let s;e.iGM(s=e.CRH())&&(n.barraBusqueda=s.first),e.iGM(s=e.CRH())&&(n.botonFiltro=s.first)}},outputs:{alSeleccionar:"alSeleccionar",alAbrirFiltro:"alAbrirFiltro"},standalone:!0,features:[e.jDz],decls:10,vars:1,consts:[[1,"ion-no-padding","ion-no-margin"],["size","10"],["placeholder","Buscar anime",3,"ionInput"],["barraBusqueda",""],["size","2"],["fill","clear","shape","circle",3,"click"],["botonFiltro",""],["slot","icon-only","src","assets/icon/filter.svg"],["class","ion-no-padding ion-no-margin",4,"ngIf"],["size","12"],[1,"contenedorscroll"],[1,"contenidoscroll",2,"height","100%"],[3,"button","click",4,"ngFor","ngForOf"],[3,"ionInfinite"],[3,"button","click"],["slot","start"],["alt","avatar",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-grid",0)(1,"ion-row",0)(2,"ion-col",1)(3,"ion-searchbar",2,3),e.NdJ("ionInput",function(f){return n.buscar(f)}),e.qZA()(),e.TgZ(5,"ion-col",4)(6,"ion-button",5,6),e.NdJ("click",function(){return n.mostrarFiltro()}),e._UZ(8,"ion-icon",7),e.qZA()()(),e.YNc(9,de,8,1,"ion-row",8),e.qZA()),2&t&&(e.xp6(9),e.Q6J("ngIf",n.busqueda))},dependencies:[g.VI,g.W2,g.ju,g.q_,g.BJ,g.Q$,g.Ie,g.MB,g.YG,g.gu,g.jY,g.Nd,g.wI,A.ez,A.sg,A.O5],styles:[".contenedorscroll[_ngcontent-%COMP%]{min-height:250px;max-height:500px;height:60vh;width:100%;z-index:997;position:absolute}.contenidoscroll[_ngcontent-%COMP%]{height:100%}ion-button[shape=circle][_ngcontent-%COMP%]{--border-radius: 50%;width:56px;height:56px}"]}),c})(),G=(()=>{var a;class c{constructor(){this.alClicar=new e.vpe,this.openCapacitorSite=t=>{t&&this.alClicar.emit(t)}}ngOnInit(){}}return(a=c).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-anime"]],inputs:{anime:"anime",indice:"indice"},outputs:{alClicar:"alClicar"},standalone:!0,features:[e.jDz],decls:51,vars:16,consts:[[1,"itemPadre",3,"button","click"],[1,"contenedorIndice","negrita","col-centrada"],[1,"ion-no-padding"],[2,"min-height","100px"],["size-xs","3","size-xl","1",1,"colImagen"],["alt","avatar",1,"imganime",3,"src"],["size-xs","9","size-xl","11"],["size","12"],[1,"contenedorTitulo"],["size","3"],[1,"contenedorDatos","ion-text-end"],[1,"contenedorDatos","negrita"],["size","6"],[1,"contenedorDatos"],[1,"negrita"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-item",0),e.NdJ("click",function(){return n.openCapacitorSite(null==n.anime?null:n.anime.url)}),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"ion-grid",2)(4,"ion-row",3)(5,"ion-col",4),e._UZ(6,"img",5),e.qZA(),e.TgZ(7,"ion-col",6)(8,"ion-grid",2)(9,"ion-row")(10,"ion-col",7)(11,"div",8),e._uU(12),e.qZA()()(),e.TgZ(13,"ion-row")(14,"ion-col",9)(15,"div",10),e._uU(16,"Tipo: "),e.qZA()(),e.TgZ(17,"ion-col",9)(18,"div",11),e._uU(19),e.qZA()(),e.TgZ(20,"ion-col",12)(21,"div",13),e._uU(22,"F.inicio: "),e.TgZ(23,"span",14),e._uU(24),e.ALo(25,"date"),e.qZA()()()(),e.TgZ(26,"ion-row")(27,"ion-col",9)(28,"div",10),e._uU(29,"Ep.: "),e.qZA()(),e.TgZ(30,"ion-col",9)(31,"div",11),e._uU(32),e.qZA()(),e.TgZ(33,"ion-col",12)(34,"div",13),e._uU(35,"F.fin: "),e.TgZ(36,"span",14),e._uU(37),e.ALo(38,"date"),e.qZA()()()(),e.TgZ(39,"ion-row")(40,"ion-col",9)(41,"div",10),e._uU(42,"Nota: "),e.qZA()(),e.TgZ(43,"ion-col",9)(44,"div",11),e._uU(45),e.qZA()(),e.TgZ(46,"ion-col",12)(47,"div",13),e._uU(48,"Estado: "),e.TgZ(49,"span",14),e._uU(50),e.qZA()()()()()()()()()),2&t&&(e.Q6J("button",!0),e.xp6(2),e.Oqu(n.indice),e.xp6(4),e.Q6J("src",null==n.anime?null:n.anime.image,e.LSH),e.xp6(6),e.Oqu(null==n.anime?null:n.anime.title),e.xp6(7),e.Oqu(null==n.anime?null:n.anime.type),e.xp6(5),e.Oqu(e.xi3(25,10,null==n.anime?null:n.anime.from,"dd/MM/yyyy")),e.xp6(8),e.Oqu(null==n.anime?null:n.anime.episodes),e.xp6(5),e.Oqu(e.xi3(38,13,null==n.anime?null:n.anime.to,"dd/MM/yyyy")),e.xp6(8),e.Oqu(null==n.anime?null:n.anime.score),e.xp6(5),e.Oqu(null==n.anime?null:n.anime.status))},dependencies:[g.Ie,g.jY,g.Nd,g.wI,A.uU],styles:["ion-avatar[_ngcontent-%COMP%]{--border-radius: 4px}.col-centrada[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center}ion-badge[_ngcontent-%COMP%]{font-size:1.5em}ion-avatar[_ngcontent-%COMP%]{height:100%;width:100%}.imganime[_ngcontent-%COMP%]{height:100%;object-fit:cover}.contenedorTitulo[_ngcontent-%COMP%]{text-align:center;font-weight:700;margin-top:.5em;margin-bottom:.5em}.contenedorIndice[_ngcontent-%COMP%]{width:7.5%}.negrita[_ngcontent-%COMP%]{font-weight:700}.contenedorDatos[_ngcontent-%COMP%]{margin-left:5px;margin-bottom:5px}@media screen and (max-width: 450px){.colImagen[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}img[_ngcontent-%COMP%]{height:55%!important}}.itemPadre[_ngcontent-%COMP%]{--padding-start: 0}"]}),c})();var Y=x(95);const X=(0,x(2726).fo)("Browser",{web:()=>x.e(671).then(x.bind(x,3671)).then(a=>new a.BrowserWeb)}),te=["tarjetaOpciones"];function fe(a,c){if(1&a&&(e.TgZ(0,"ion-card",2,3)(2,"ion-card-header")(3,"ion-card-title"),e._uU(4),e.qZA(),e.TgZ(5,"ion-card-subtitle"),e._uU(6),e.qZA()(),e.TgZ(7,"ion-card-content"),e.Hsn(8),e.qZA()()),2&a){const o=e.oxw();e.xp6(4),e.Oqu(o.titulo),e.xp6(2),e.Oqu(o.subtitulo)}}const ne=a=>({fondoOpciones:a}),ie=["*"];let oe=(()=>{var a;class c{constructor(){this.filtroVisible=!1}ngOnInit(){}onGlobalClick(t){this.filtroVisible&&(this.tarjetaOpciones.nativeElement.contains(t.target)||(this.filtroVisible=!1))}}return(a=c).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-tarjeta-opciones"]],viewQuery:function(t,n){if(1&t&&e.Gf(te,5,e.SBq),2&t){let s;e.iGM(s=e.CRH())&&(n.tarjetaOpciones=s.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mousedown",function(f){return n.onGlobalClick(f)},!1,e.evT)},inputs:{filtroVisible:"filtroVisible",titulo:"titulo",subtitulo:"subtitulo"},standalone:!0,features:[e.jDz],ngContentSelectors:ie,decls:2,vars:4,consts:[[3,"ngClass"],["class","cardOpciones ion-no-margin",4,"ngIf"],[1,"cardOpciones","ion-no-margin"],["tarjetaOpciones",""]],template:function(t,n){1&t&&(e.F$t(),e._UZ(0,"div",0),e.YNc(1,fe,9,2,"ion-card",1)),2&t&&(e.Q6J("ngClass",e.VKq(2,ne,n.filtroVisible)),e.xp6(),e.Q6J("ngIf",n.filtroVisible))},dependencies:[g.PM,g.FN,g.Zi,g.Dq,g.tO,A.ez,A.mk,A.O5],styles:[".cardOpciones[_ngcontent-%COMP%]{z-index:999;position:absolute;right:0;width:300px}@media screen and (max-width: 600px){.cardOpciones[_ngcontent-%COMP%]{position:fixed;width:80vw;height:210px;top:calc((100% - 210px)/2);left:10vw;right:10vw}.fondoOpciones[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:998;background:#d3d3d3;opacity:.5}}"]}),c})();const re=["filtroBusqueda"],ae=["filtroVisibilidad"],pe=["checkResumenes"],l=["checkOtros"],i=["checkCharacter"],r=["toastAviso"];function d(a,c){1&a&&(e.TgZ(0,"ion-row")(1,"ion-col",15),e._UZ(2,"ion-progress-bar",16),e.qZA()())}function p(a,c){if(1&a){const o=e.EpF();e.TgZ(0,"ion-button",32),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2);return e.KtG(n.cancelarBusqueda())}),e._uU(1,"Cancelar"),e.qZA()}}function u(a,c){if(1&a){const o=e.EpF();e.TgZ(0,"ion-button",32),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2);return e.KtG(n.limpiarTodo())}),e._uU(1,"Limpiar"),e.qZA()}}function P(a,c){if(1&a){const o=e.EpF();e.TgZ(0,"div",33)(1,"ion-checkbox",34),e.NdJ("ionChange",function(){const s=e.CHM(o).$implicit,f=e.oxw(2);return e.KtG(f.cambiarVisualizacion(s))}),e._uU(2),e.qZA()()}if(2&a){const o=c.$implicit,t=e.oxw(2);e.xp6(),e.Q6J("checked",t.tipos.get(o)),e.xp6(),e.Oqu(o)}}function m(a,c){if(1&a){const o=e.EpF();e.TgZ(0,"app-anime",35),e.NdJ("alClicar",function(n){e.CHM(o);const s=e.oxw(2);return e.KtG(s.abrirNavegador(n))}),e.qZA()}if(2&a){const o=c.$implicit;e.Q6J("indice",c.index+1)("anime",o)}}function C(a,c){if(1&a){const o=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",17)(2,"ion-item",18)(3,"ion-grid")(4,"ion-row")(5,"ion-col",19),e._uU(6),e.qZA(),e.TgZ(7,"ion-col",20),e.YNc(8,p,2,0,"ion-button",21)(9,u,2,0,"ion-button",21),e.TgZ(10,"ion-button",22,23),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.mostrarVisibilidad())}),e._UZ(12,"ion-icon",24),e.qZA(),e.TgZ(13,"app-tarjeta-opciones",25,26)(15,"div",27),e.YNc(16,P,3,2,"div",28),e.qZA()()()()()(),e.TgZ(17,"ion-content",29)(18,"ion-list",30),e.YNc(19,m,1,2,"app-anime",31),e.qZA()()()()}if(2&a){const o=e.oxw();e.xp6(6),e.hij("Cap\xedtulos: ",o.getCapitulosTotales(),""),e.xp6(2),e.Q6J("ngIf",o.barraProgreso),e.xp6(),e.Q6J("ngIf",!o.barraProgreso&&o.animes),e.xp6(7),e.Q6J("ngForOf",o.clavesDeTipos),e.xp6(),e.Q6J("scrollEvents",!0),e.xp6(2),e.Q6J("ngForOf",o.animesVisibles)}}let w=(()=>{var a;class c{get clavesDeTipos(){var t;return null===(t=[...this.tipos.keys()])||void 0===t?void 0:t.sort()}get animesVisibles(){var t;return null===(t=this.animes)||void 0===t?void 0:t.filter(n=>!this.tipos.has(n.type)||this.tipos.get(n.type))}setOpen(t){this.isToastOpen=t}setAlertOpen(t){this.isAlertOpen=t}get filtros(){let t=[];return this.summary&&t.push("Summary"),this.other&&t.push("Other"),this.character&&t.push("Character"),t}constructor(t){var s,n=this;this.animeService=t,this.animes=[],this.barraProgreso=!1,this.isToastOpen=!1,this.isAlertOpen=!1,this.alertButtons=[{text:"No",role:"cancel",handler:()=>{}},{text:"S\xed",role:"confirm",handler:(s=(0,_.Z)(function*(){yield X.open({url:n.urlParaAbrir}),n.urlParaAbrir=void 0}),function(){return s.apply(this,arguments)})}],this.summary=!1,this.other=!1,this.character=!1,this.controladorBusqueda={cancelar:!1},this.tipos=new Map}ver(t){let n={mal_id:t.id,url:t.url,type:"",name:""};this.animes=[],this.animeService.obtenidos.clear(),this.animeService.obtenidos.set(n.mal_id,n),this.barraProgreso=!0,this.controladorBusqueda.cancelar=!1,this.tipos.clear(),this.animeService.sagase(n,this.filtros,this.animes,this.controladorBusqueda).then(()=>{this.cargarTipos(),this.barraProgreso=!1,this.isToastOpen=!0,this.toastAviso.message="Se han encontrado "+this.animes.length+" resultados"}).catch(s=>{console.error(s),this.barraProgreso=!1,this.isToastOpen=!0,this.toastAviso.message=null!=s?s:"Ha ocurrido un error; int\xe9ntelo de nuevo m\xe1s adelante."})}mostrarFiltro(){this.filtroBusqueda.filtroVisible=!0}mostrarVisibilidad(){this.filtroVisibilidad.filtroVisible=!0}abrirNavegador(t){var n=this;return(0,_.Z)(function*(){n.urlParaAbrir=t,n.isAlertOpen=!0})()}getCapitulosTotales(){return this.animesVisibles?this.animesVisibles.map(t=>t.episodes).reduce((t,n)=>t+n,0):0}cancelarBusqueda(){this.controladorBusqueda.cancelar=!0}limpiarTodo(){this.animes=[]}cargarTipos(){this.tipos.clear(),this.animes.map(t=>t.type).forEach(t=>this.tipos.set(t,!0))}cambiarVisualizacion(t){this.tipos.set(t,!this.tipos.get(t)),console.log(this.tipos)}}return(a=c).\u0275fac=function(t){return new(t||a)(e.Y36(W))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-home"]],viewQuery:function(t,n){if(1&t&&(e.Gf(re,5),e.Gf(ae,5),e.Gf(pe,5),e.Gf(l,5),e.Gf(i,5),e.Gf(r,5)),2&t){let s;e.iGM(s=e.CRH())&&(n.filtroBusqueda=s.first),e.iGM(s=e.CRH())&&(n.filtroVisibilidad=s.first),e.iGM(s=e.CRH())&&(n.checkResumenes=s.first),e.iGM(s=e.CRH())&&(n.checkOtros=s.first),e.iGM(s=e.CRH())&&(n.checkCharacter=s.first),e.iGM(s=e.CRH())&&(n.toastAviso=s.first)}},standalone:!0,features:[e.jDz],decls:27,vars:9,consts:[[1,"ion-no-margin"],[1,"barraSuperior"],["size-xs","12","size-sm","10"],[3,"alSeleccionar","alAbrirFiltro"],["titulo","Filtro de b\xfasqueda","subtitulo","Omitir:"],["filtroBusqueda",""],["size","6","offset","1"],["labelPlacement","end",3,"ngModel","ngModelChange"],["checkResumenes",""],["checkOtros",""],["checkCharacter",""],[4,"ngIf"],[3,"isOpen","duration","didDismiss"],["toastAviso",""],["header","Abrir enlace","message","Se va a abrir un enlace externo; \xbfdesea continuar?",3,"isOpen","buttons","didDismiss"],["size","12"],["type","indeterminate"],["size-xs","12","size-sm","8","offset-sm","2",1,"contentScroll"],[1,"overflowVisible"],["size","6",1,"flexTextoCentradoVerticalmente"],["size","6",2,"z-index","3"],["class","ion-float-right","shape","round",3,"click",4,"ngIf"],["fill","clear","shape","circle","id","botonVisibilidad",1,"ion-float-right",3,"click"],["botonVisibilidad",""],["slot","icon-only","src","assets/icon/visibility.svg"],["titulo","Mostrar","subtitulo","",1,"filtroVisibilidad"],["filtroVisibilidad",""],[1,"contenedorFiltroVisualizacion"],["class","itemFiltroVisualizacion",4,"ngFor","ngForOf"],[3,"scrollEvents"],[1,"ion-no-padding"],[3,"indice","anime","alClicar",4,"ngFor","ngForOf"],["shape","round",1,"ion-float-right",3,"click"],[1,"itemFiltroVisualizacion"],["justify","start","labelPlacement","end",3,"checked","ionChange"],[3,"indice","anime","alClicar"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-grid",0)(1,"ion-row",1)(2,"ion-col",2)(3,"app-buscador",3),e.NdJ("alSeleccionar",function(f){return n.ver(f)})("alAbrirFiltro",function(){return n.mostrarFiltro()}),e.qZA(),e.TgZ(4,"app-tarjeta-opciones",4,5)(6,"ion-grid")(7,"ion-row")(8,"ion-col",6)(9,"ion-checkbox",7,8),e.NdJ("ngModelChange",function(f){return n.summary=f}),e._uU(11,"Res\xfamenes"),e.qZA()()(),e.TgZ(12,"ion-row")(13,"ion-col",6)(14,"ion-checkbox",7,9),e.NdJ("ngModelChange",function(f){return n.other=f}),e._uU(16,"Otros"),e.qZA()()(),e.TgZ(17,"ion-row")(18,"ion-col",6)(19,"ion-checkbox",7,10),e.NdJ("ngModelChange",function(f){return n.character=f}),e._uU(21,"Character"),e.qZA()()()()()()(),e.YNc(22,d,3,0,"ion-row",11)(23,C,20,6,"ion-row",11),e.qZA(),e.TgZ(24,"ion-toast",12,13),e.NdJ("didDismiss",function(){return n.setOpen(!1)}),e.qZA(),e.TgZ(26,"ion-alert",14),e.NdJ("didDismiss",function(){return n.setAlertOpen(!1)}),e.qZA()),2&t&&(e.xp6(9),e.Q6J("ngModel",n.summary),e.xp6(5),e.Q6J("ngModel",n.other),e.xp6(5),e.Q6J("ngModel",n.character),e.xp6(3),e.Q6J("ngIf",n.barraProgreso),e.xp6(),e.Q6J("ngIf",null!=n.animes&&n.animes.length>0),e.xp6(),e.Q6J("isOpen",n.isToastOpen)("duration",5e3),e.xp6(2),e.Q6J("isOpen",n.isAlertOpen)("buttons",n.alertButtons))},dependencies:[oe,g.Ge,g.Px,g.X7,g.W2,me,G,g.jY,g.Nd,g.wI,g.q_,g.Ie,g.YG,g.gu,g.nz,A.ez,A.sg,A.O5,Y.u5,Y.JJ,Y.On],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.barraSuperior[_ngcontent-%COMP%]{height:75px}.contentScroll[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 90px)}.contentScroll[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%]{height:50px}.contentScroll[_ngcontent-%COMP%] > ion-content[_ngcontent-%COMP%]{height:calc(100% - 50px)}.flexTextoCentradoVerticalmente[_ngcontent-%COMP%]{display:flex;align-items:center}ion-list[_ngcontent-%COMP%]:last-child{margin-bottom:100px}#botonVisibilidad[_ngcontent-%COMP%]{position:relative}.filtroVisibilidad[_ngcontent-%COMP%]{top:100%;right:0;position:absolute}.overflowVisible[_ngcontent-%COMP%]{position:relative;overflow:visible}.contenedorFiltroVisualizacion[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-wrap:wrap}.itemFiltroVisualizacion[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center}"]}),c})()}}]);